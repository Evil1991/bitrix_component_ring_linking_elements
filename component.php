<?php if(!defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED!==true)die();/** @var array $arParams *//** @var array $arResult */if (!$arParams['ELEMENT_ID'] || !CModule::IncludeModule("iblock"))    return;$res = CIBlockElement::GetByID($arParams['ELEMENT_ID']);$arResult['ELEMENT'] = $res->GetNext();if (!$arResult['ELEMENT'])    return;$arSort         = array("ID" => "ASC",);$arSelect       = array("ID");$arFilter       = array (    "IBLOCK_ID"         => $arResult['ELEMENT']["IBLOCK_ID"],    "IBLOCK_SECTION_ID" => $arResult['ELEMENT']["IBLOCK_SECTION_ID"],    "ACTIVE"            => "Y",    "CHECK_PERMISSIONS" => "Y",);$arNavParams    = array(    "nPageSize"     => $arParams['AMOUNT'],    "nElementID"    => $arResult['ELEMENT']['ID'],);$rsElement = CIBlockElement::GetList($arSort, $arFilter, false, $arNavParams, $arSelect);$arResult['ITEMS'] = [];while($obElement = $rsElement->GetNextElement())    $arResult['ITEMS'][] = $obElement->GetFields();$INDEX  = false;$IDS    = [];foreach ($arResult['ITEMS'] as $INDEX => $ITEM) {    if ($ITEM['ID'] == $arResult['ELEMENT']['ID'])        break;}if ($INDEX !== false) {    $arResult['ITEMS'] = array_slice($arResult['ITEMS'], $INDEX+1);}if (count($arResult['ITEMS']) < $arParams['AMOUNT']) {    $rsElement  = CIBlockElement::GetList($arSort, $arFilter, false, array(), $arSelect);    $LAST_CNT   = $arParams['AMOUNT'] - count($arResult['ITEMS']);    for ($i = 1; $i <= $LAST_CNT; $i++) {        if ($obElement = $rsElement->GetNextElement()) {            $ELEM = $obElement->GetFields();            if ($ELEM['ID'] == $arResult['ELEMENT']['ID'])                break;            $arResult['ITEMS'][] = $ELEM;        }    }}foreach ($arResult['ITEMS'] as $ITEM) {    $IDS[$ITEM['ID']] = $ITEM['ID'];}return $IDS;